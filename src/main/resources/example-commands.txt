gcloud config set project sclr-01
gcloud config set compute/zone us-central1-a
gcloud container clusters create sclr-01  --zone us-central1-a --num-nodes 8 --cluster-version=1.9.7-gke.0
gcloud compute project-info describe --project sclr-01
gcloud container clusters get-credentials cluster-1
gcloud container clusters delete cluster-1
kubectl create secret generic mysql-password --from-literal=password=KO4eD0BrP2PC19jO
kubectl scale statefulsets compute --replicas=5

docker images
docker rmi -f $(docker images -a -q)

// give docker access to us.gcr.io
gcloud auth configure-docker
docker-credential-gcr configure-docker
cd src/main/resources/docker/; docker build -t local/openjdk-custom:latest .; cd ../../../../;
sbt docker:publish
sbt docker:publishLocal

kubectl get all -o wide
kubectl describe pods compute-0
kubectl logs -v=5 -f compute-0
kubectl logs -v=5 -f $(kubectl get pods -o name | grep "manage")

kubectl config get-contexts
kubectl config use-context minikube
kubectl config use-context gke_sclr-01_us-central1-a_sclr-01

cd src/main/resources/kubernetes/; kubectl create -f mysql.yaml; kubectl create -f manage-pods.yaml; kubectl create -f compute-pods.yaml; cd ../../../..;
kubectl delete pvc mysql-pv-claim; kubectl delete all -l app=sclr

kubectl exec -ti compute-0 -- curl -vH "Content-Type: application/json" -X POST -d '{"name":"m5000","dnfSize":2,"optionalSubsample":500,"useLPNorm":true,"mu":0.2465}' http-service.default.svc.cluster.local:8080/begin
**** MYSQL ****

kubectl exec -it compute-0 -- /bin/bash
kubectl run -it --rm --image=mysql:5.7 --restart=Never mysql-client -- mysql -h mysql-service -pKO4eD0BrP2PC19jO
kubectl exec -it mysql-client -- mysql -h mysql-service -pKO4eD0BrP2PC19jO

kubectl exec -ti mysql-7d98565cb6-nqcvd -- mysqldump --add-drop-database --databases m5000 -pKO4eD0BrP2PC19jO > backup.sql
mysqldump --databases m5000 -h mysql-service.default.svc.cluster.local -pKO4eD0BrP2PC19jO > backup.sql 

/usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/
sudo ln -s /usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/bin/kubectl /usr/local/bin/kubectl
sudo ln -s /usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/bin/docker-credential-gcr /usr/local/bin/docker-credential-gcr
sudo ln -s /usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/bin/container-builder-local /usr/local/bin/container-builder-local


docker pull us.gcr.io/sclr-01/manage:latest
docker pull us.gcr.io/sclr-01/compute:latest

SELECT count(*) from m5000.results;
select * from m5000.results order by created_at limit 1;
select * from m5000.results order by created_at desc limit 1;
SELECT * FROM m5000.results WHERE error = (SELECT MIN(error) FROM m5000.results);

Correct: 
(-22,31), (-3,5), (21,-40), (-31,-3), (43,11), (-44,-5), (-32,42), (-9,-33), (5,-16), (9,2), (-31,-21), (29,40), (-16,21), (-7,-10), (4,-33), (15,38)
